<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml">
   
   	
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <link rel="stylesheet" type="text/css" href="explain.css" />
      <title>XSLT Exercise 2</title>
   </head>
   
   
   
   <body>
      <!--#include virtual="top.html" -->
      		
      			
      <h1><span class="banner">XSLT Exercise 2</span></h1>
      <h3>Overview of the Assignment</h3>
      <p>The Digital Mitford Site Index stores lists of names and information on people, places, organizations, and texts, among other kinds of named entities referenced in files throughout the Digital Mitford project. For this assignment, we will work with a slightly modified version of the Digital Mitford Site Index, which you should download <a href="si-modified.xml">from here</a> and open in &lt;oXygen&gt;. (You may see some errors being flagged on this file in oXygen from our project schema, and that is okay! This is an old project file that we have purposefully preserved for homework exercises, and you can process the code as long as it is well formed, as the schema validation doesn’t matter for our purposes.) Our goal is to create a structured outline in HTML of all the information about organizations in the site index. We want to output that in HTML in the form of a list with nested lists inside, representing an outline of first the <em>categories</em> of organization, and then inside each category, a new list of the organization names.  This is something we actually need to do in the Mitford project: to process portions of the Site Index file to make it readable on the web as a list. One possible use of a webpage like this is as a list of links, so that each organization name might link to a page of information on each organization. We don't have to generate those links now. For this assignment, we just want to learn how to transform XSLT to HTML and to generate the lists themselves by pulling the right content out of our XML.</p>
      <p>If you’re feeling adventurous, once you obtain the output we're seeking, you may go on to build other HTML lists, working with other portions of the XML document, such as the <code>&lt;listBibl&gt;</code> or <code>&lt;listPerson&gt;</code> sections, which are formatted a little differently. The only required content of your homework, though, is the HTML outline of <strong>organization types</strong> and <strong>organization names</strong>. For the organization types or categories, we need to pull from the <span class="code">&lt;head&gt;</span> element sitting inside at the top of each <span class="code">&lt;listOrg&gt;</span> elements in our TEI file. For the organization names, we reach in to find the individual entries for <span class="code">&lt;org&gt;</span> and their child <span class="code">&lt;orgName&gt;</span> elements inside each <span class="code">&lt;listOrg&gt;</span> element. Each <span class="code">&lt;org&gt;</span> element contains one <span class="code">&lt;orgName&gt;</span> inside that holds the best-known name of a particular organization. You may first want to experiment with XPath on the Site Index file to locate the <span class="code">&lt;listOrg&gt;</span> elements and study the XML hierarchy of the lists. Let’s make the outer list be <strong>ordered</strong> (or numbered) list in HTML, using the HTML <span class="code">&lt;ol&gt;</span> element, and then make the inner list be an <strong>unordered</strong> (bulleted) list, using the HTML <span class="code">&lt;ul&gt;</span> element.</p>
      <p>Your lists in HTML should come out looking something like this, only yours will have a few more entries in each category, because your XML document contains some new material.</p>
<div class="code">
   <ol>
      <li>Archives Holding Mitford's Papers<ul>
         <li>Baylor University, Armstrong Browning Library</li>
         <li>Berkshire Record Office</li>
         <li>British Library</li>
         <li>Boston Public Library</li>
         <li>Cambridge University: Fitzwilliam Museum</li>
         <li>Duke University Rubenstein Library</li>
         <li>Eton College</li>
         <li>Florida State University Special Collections</li>
         <li>The Women's Library, Glasgow</li>
         <li>Houghton Library, Harvard</li>
         <li>Huntington Library</li>
         <li>University of Iowa Special Collections</li>
         <li>Massachusetts Historical Society</li>
         <li>New York Public Library</li>
         <li>Oxford University, Balliol College Archives</li>
         <li>Oxford University, Bodleian Library</li>
         <li>Reading Central Library The principal archive of Mary
            Russell Mitford's personal papers and related documents, holding
            approximately 1,000 manuscripts and a nearly comprehensive collection of her
            publications.
         </li>
         <li>John Ruskin Library, Lancaster</li>
         <li>The John Rylands Library</li>
         <li>National Library of Scotland, Manuscript Collections</li>
         <li>University of Texas, Ransom Center</li>
         <li>University of Reading Special Collections</li>
         <li>University of Virginia Special Collections</li>
         <li>Wellesley College, Margaret Clapp Library, Special Collections</li>
         <li>Wordsworth Trust</li>
         <li>Yale University, Beineke Library</li>
      </ul>
      </li>
      <li>Organizations Relevant to Mitford's World<ul>
         <li>Billiard Club</li>
         <li>House of Bourbon</li>
         <li>Cavaliers</li>
         <li>Court of Chancery</li>
         <li>Church of England</li>
         <li>the Cockney School</li>
         <li>
            Drover
         </li>
         <li>Eton College</li>
         <li>High Court of Justice</li>
         <li>House of Commons</li>
         <li>the Kembles</li>
         <li>House of Medici</li>
         <li>
            Mitford
         </li>
         <li>Mr.and Mrs.Mitford</li>
         <li>the Moncks, family of John Berkeley
            Monck
         </li>
         <li>New Model Army</li>
         <li>Palmerite</li>
         <li>Parliament</li>
         <li>Court of Pope Pius VII</li>
         <li>Prelacy</li>
         <li>the Presybterian faction</li>
         <li>Privy Council</li>
         <li>Richmond Coach or Stage</li>
         <li>Scriblerus Club</li>
         <li>
            Slade family
         </li>
         <li>Taylor and Hessey (publishers)</li>
         <li>Tory Party</li>
         <li>Twickenham Coach or Stage</li>
         <li>
            Valpy family
         </li>
         <li>
            Webb family
         </li>
         <li>Weylandite</li>
      </ul>
      </li>
      <li>Fictional Organizations Referenced by Mitford<ul>
         <li>Attendants &amp;c.</li>
         <li>Citizens</li>
         <li>Guards</li>
         <li>Guards</li>
         <li>Ladies</li>
         <li>Nobles (in Julian)</li>
         <li>Nobles (in Rienzi)</li>
         <li>officers in Charles I
         </li>
         <li>Prelates</li>
      </ul>
      </li>
   </ol>
</div>
<p>The underlying HTML, which we generated by running XSLT, should look like this:</p>
<pre>
   &lt;ol&gt;
         &lt;li&gt;Archives Holding Mitford's Papers&lt;ul&gt;
               &lt;li&gt;Baylor University, Armstrong Browning Library&lt;/li&gt;
               &lt;li&gt;Berkshire Record Office&lt;/li&gt;
               &lt;li&gt;British Library&lt;/li&gt;
               &lt;li&gt;Boston Public Library&lt;/li&gt;
               &lt;li&gt;Cambridge University: Fitzwilliam Museum&lt;/li&gt;
               &lt;li&gt;Duke University Rubenstein Library&lt;/li&gt;
               &lt;li&gt;Eton College&lt;/li&gt;
               &lt;li&gt;Florida State University Special Collections&lt;/li&gt;
               &lt;li&gt;The Women's Library, Glasgow&lt;/li&gt;
               &lt;li&gt;Houghton Library, Harvard&lt;/li&gt;
               &lt;li&gt;Huntington Library&lt;/li&gt;
               &lt;li&gt;University of Iowa Special Collections&lt;/li&gt;
               &lt;li&gt;Massachusetts Historical Society&lt;/li&gt;
               &lt;li&gt;New York Public Library&lt;/li&gt;
               &lt;li&gt;Oxford University, Balliol College Archives&lt;/li&gt;
               &lt;li&gt;Oxford University, Bodleian Library&lt;/li&gt;
               &lt;li&gt;Reading Central Library The principal archive of Mary
                        Russell Mitford's personal papers and related documents, holding
                        approximately 1,000 manuscripts and a nearly comprehensive collection of her
                        publications.
                  &lt;/li&gt;
               &lt;li&gt;John Ruskin Library, Lancaster&lt;/li&gt;
               &lt;li&gt;The John Rylands Library&lt;/li&gt;
               &lt;li&gt;National Library of Scotland, Manuscript Collections&lt;/li&gt;
               &lt;li&gt;University of Texas, Ransom Center&lt;/li&gt;
               &lt;li&gt;University of Reading Special Collections&lt;/li&gt;
               &lt;li&gt;University of Virginia Special Collections&lt;/li&gt;
               &lt;li&gt;Wellesley College, Margaret Clapp Library, Special Collections&lt;/li&gt;
               &lt;li&gt;Wordsworth Trust&lt;/li&gt;
               &lt;li&gt;Yale University, Beineke Library&lt;/li&gt;
            &lt;/ul&gt;
         &lt;/li&gt;
         &lt;li&gt;Organizations Relevant to Mitford's World&lt;ul&gt;
               &lt;li&gt;Billiard Club&lt;/li&gt;
               &lt;li&gt;House of Bourbon&lt;/li&gt;
               &lt;li&gt;Cavaliers&lt;/li&gt;
               &lt;li&gt;Court of Chancery&lt;/li&gt;
               &lt;li&gt;Church of England&lt;/li&gt;
               &lt;li&gt;the Cockney School&lt;/li&gt;
               &lt;li&gt;
                     Drover
                  &lt;/li&gt;
               &lt;li&gt;Eton College&lt;/li&gt;
               &lt;li&gt;High Court of Justice&lt;/li&gt;
               &lt;li&gt;House of Commons&lt;/li&gt;
               &lt;li&gt;the Kembles&lt;/li&gt;
               &lt;li&gt;House of Medici&lt;/li&gt;
               &lt;li&gt;
                     Mitford
                  &lt;/li&gt;
               &lt;li&gt;Mr.and Mrs.Mitford&lt;/li&gt;
               &lt;li&gt;the Moncks, family of John Berkeley
                        Monck
                  &lt;/li&gt;
               &lt;li&gt;New Model Army&lt;/li&gt;
               &lt;li&gt;Palmerite&lt;/li&gt;
               &lt;li&gt;Parliament&lt;/li&gt;
               &lt;li&gt;Court of Pope Pius VII&lt;/li&gt;
               &lt;li&gt;Prelacy&lt;/li&gt;
               &lt;li&gt;the Presybterian faction&lt;/li&gt;
               &lt;li&gt;Privy Council&lt;/li&gt;
               &lt;li&gt;Richmond Coach or Stage&lt;/li&gt;
               &lt;li&gt;Scriblerus Club&lt;/li&gt;
               &lt;li&gt;
                     Slade family
                  &lt;/li&gt;
               &lt;li&gt;Taylor and Hessey (publishers)&lt;/li&gt;
               &lt;li&gt;Tory Party&lt;/li&gt;
               &lt;li&gt;Twickenham Coach or Stage&lt;/li&gt;
               &lt;li&gt;
                     Valpy family
                  &lt;/li&gt;
               &lt;li&gt;
                     Webb family
                  &lt;/li&gt;
               &lt;li&gt;Weylandite&lt;/li&gt;
            &lt;/ul&gt;
         &lt;/li&gt;
         &lt;li&gt;Fictional Organizations Referenced by Mitford&lt;ul&gt;
               &lt;li&gt;Attendants &amp;amp;c.&lt;/li&gt;
               &lt;li&gt;Citizens&lt;/li&gt;
               &lt;li&gt;Guards&lt;/li&gt;
               &lt;li&gt;Guards&lt;/li&gt;
               &lt;li&gt;Ladies&lt;/li&gt;
               &lt;li&gt;Nobles (in Julian)&lt;/li&gt;
               &lt;li&gt;Nobles (in Rienzi)&lt;/li&gt;
               &lt;li&gt;officers in Charles I
                  &lt;/li&gt;
               &lt;li&gt;Prelates&lt;/li&gt;
            &lt;/ul&gt;
         &lt;/li&gt;
      &lt;/ol&gt;
</pre>
   
      <p>In HTML ordered and unordered lists, the only elements permitted inside are list items or <span class="code">&lt;li&gt;</span> elements. We’ve nested them so that each list item in the outside numbered list contains a category type (designating what kind of organization), followed by an embedded <span class="code">&lt;ul&gt;</span> that contains, in turn, a separated bulleted list series, listing the name of each organization in the list.</p>
      			
      		<h3>Before You Begin: Set up the XSLT Stylesheet to Read TEI</h3>	
      <p>The Digital Mitford's Site Index file is coded in the TEI namespace, which means that your XSLT stylesheet (much as in the last assignment) requires an instruction at the top to specify that when it tries to match elements, it needs to match them in the TEI namespace. (When you create an new XSLT document in &lt;oXygen/&gt; it won’t contain that instruction by default, so whenever you are working with TEI you need to add it (See the text in <span style="color:blue;">blue</span> below). To ensure that the output would be in the XHTML namespace, we
         added a default namespace declaration (in <span style="color: purple;">purple</span>
         below). To output the required DOCTYPE declaration, we also created
         <code>&lt;xsl:output&gt;</code> element as the first child of our root
         <code>&lt;xsl:stylesheet&gt;</code> element (in <span style="color: #006400;"
            >green</span> below), and we needed to include an attribute there to omit the default XML declaration because if we output it that XML line in our XHTML output, it will not produce valid HTML with the w3C and might produce quirky problems with rendering in various web browsers. So, our modified stylesheet template and xsl:output line is this, and you should copy this into your stylesheet:</p>
      
      <pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
         &lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="3.0"
    <span style="color:purple;">xmlns="http://www.w3.org/1999/xhtml"</span>
   <span style="color:blue;"> xpath-default-namespace="http://www.tei-c.org/ns/1.0"</span>&gt;
    
   <span style="color:#006400;"> &lt;xsl:output method="xhtml" encoding="utf-8" doctype-system="about:legacy-compat"
        omit-xml-declaration="yes"/&gt;</span>
    
    &lt;/xsl:stylesheet&gt;
      </pre>
     
      
      <h3>Guide to Approaching the Problem</h3>
      <p>Our XSLT transformation (after all this housekeeping) has three template rules:</p>
      <ol>
         <li>We have a template rule for the <strong>document node</strong> (<code>&lt;xsl:template
            match="/"&gt;</code>), in which we create the basic HTML file structure: the
            <code>&lt;html&gt;</code> element, <code>&lt;head&gt;</code> and its contents,
            and <code>&lt;body&gt;</code>—anything that appears just once in the HTML document (one to one relationship with the root node). Inside the <code>&lt;body&gt;</code> element that
            we’re creating, we use <code>&lt;xsl:apply-templates&gt;</code> and select the <code>&lt;listOrg&gt;</code> elements
            (using an XPath expression as the value of the <code>@select</code> attribute). And we create our wrapper <code>&lt;ol&gt;</code> tags to set up the ordered list of organization types.</li>
         <li>We have a separate template rule that matches the <code>&lt;listOrg&gt;</code> elements (holding the lists of organizations), so it will be invoked as a result of the preceding <code>&lt;xsl:apply-templates&gt;</code> instruction, and
            will fire once for each <code>&lt;listOrg&gt;</code> element in our Site Index. Inside that template rule we create a new list item
            (<code>&lt;li&gt;</code>) for the particular <code>&lt;listOrg&gt;</code> being processed and inside the tags for
            that new list item we do two things. First, we apply templates to the
            <code>&lt;head&gt;</code> for the <code>&lt;listOrg&gt;</code>, which will cause its category description to
            be output when we run the transformation. Second, we create wrapper <code>&lt;ul&gt;</code> tags for the nested
            list that will contain the names of the organizations within that category. Inside that new
            <code>&lt;ul&gt;</code> element, we use an
            <code>&lt;xsl:apply-templates&gt;</code> rule to apply templates to (that is, to
            process) the <code>&lt;org&gt;</code> elements of that <code>&lt;listOrg&gt;</code>.</li>
         <li>We have a separate template rule that matches the <code>&lt;org&gt;</code> elements, which make up the items in the list of organizations, 
            and that just applies
            templates to the <code>&lt;orgName&gt;</code> element within each <code>&lt;org&gt;</code>.
            This rule will fire once for each <code>&lt;org&gt;</code> element inside the <code>&lt;listOrg&gt;</code>, and it will be called separately for the <code>&lt;org&gt;</code> elements within each <code>&lt;listOrg&gt;</code>, so that the orgs will be rendered properly in their respective lists.</li>
      </ol>
      <p>We don’t need a template rule for the <code>&lt;head&gt;</code> elements themselves
         because the built-in (default) template rule in XSLT for an <em>element</em> that
         doesn’t have an explicit, specified rule is just to apply templates to its children. The
         only child of the <code>&lt;head&gt;</code> elements is a text node, and the built-in
         rule for <em>text nodes</em> is to output them literally. In other words, if you apply
         templates to <code>&lt;head&gt;</code> and you don’t have a template rule that matches
         that element, ultimately the transformation will just output the textual content of the
         head, that is, the title that you want.</p>
      <h3>Important</h3>
      <ul>
         <li>Those who like to read ahead or already have some programming experience with other
            languages may have noticed that XSLT includes an <code>&lt;xsl:for-each&gt;</code>
            instruction that <em>could</em> be used to solve this problem. <em>We are
               prohibiting its use for now;</em> your solution must use
            <code>&lt;xsl:template&gt;</code> and <code>&lt;xsl:apply-templates&gt;</code>
            rules instead. There’s a Good Reason for this, which we’ll explain later, when we
            talk about situations where you <em>should</em> use
            <code>&lt;xsl:for-each&gt;</code>.</li>
         <li>You may notice that two or three of your output bulleted list items show multiple related organization names squished together. This is because our editors occasionally provided more than one name used for an organization. Our standing rule is that the most definitive <code>orgName</code> be listed <em>first</em> in the list of names, so we recommend that you tidy up your list by selecting just the very first available orgName, that is, the first element child named <code>orgName</code> of <code>org</code> elements you are processing. Alternatively, you may try applying an XPath <code>string-join()</code> function to output the entries, but you will need to use <code>xsl:value-of</code> instead of <code>xsl:apply-templates</code> because we need to use <code>xsl:value-of</code> to calculate the results of functions (which removes us from the XML tree). Either approach is fine with us, and you would use the same <code>@select</code> attribute to indicate what you would like to output.</li>
         <li><em>Before submitting your homework, you must run the transformation at home</em> to
            make sure the results are what you expect them to be. Remember, there’s a guide to running
            XSLT transformations inside &lt;oXygen/&gt; in our <a href="explainXSLT.html">Intro to XSLT tutorial</a>. If you don’t get
            the results you expect and can’t figure out what you’re doing wrong, remember that you can post a query to our <a href="https://github.com/ebeshero/DHClass-Hub/issues">DHClass-Hub Issues board</a>. You can’t just ask for the answer,
            though; you need to describe what you tried, what you expected, what you got, and
            what you think the problem is. We often find, just as we’re preparing to post our
            own queries to coding discussion boards, that having to write up a description
            of the problem helps us think it through and solve it ourselves. We’re also
            encouraging you to discuss the homework on the discussion boards because that’s also
            helpful for the person who responds. Answering someone else’s
            inquiry and troubleshooting someone else’s problem often helps us clarify matters for
            ourselves!</li>
         <li>When you complete this assignment, submit your XSLT file and your output HTML file to Courseweb, following our usual homework file-naming conventions.</li>
      </ul>
      
     				
    
   </body>
   
   
   
   
</html>